<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –±–æ—Ç–æ–≤ - Telegram Bot Manager</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="description" content="–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏—Ö Telegram –±–æ—Ç–æ–≤. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã, –∏–≥—Ä—ã, –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏—è –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.">
    <meta name="keywords" content="telegram –±–æ—Ç—ã, –±–æ—Ç—ã, —á–∞—Ç-–±–æ—Ç—ã, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è">
    
    <!-- Open Graph –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π -->
    <meta property="og:title" content="ü§ñ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –±–æ—Ç–æ–≤">
    <meta property="og:description" content="–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏—Ö Telegram –±–æ—Ç–æ–≤">
    <meta property="og:type" content="website">
    
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .hero-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 1rem;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1.5rem;
        }
        
        .search-bar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50px;
            padding: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .search-bar input {
            border: none;
            outline: none;
            background: transparent;
            padding: 0.5rem 1rem;
            font-size: 1.1rem;
        }
        
        .filters-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .bot-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .bot-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
        }
        
        .bot-card.featured {
            border: 2px solid #ffd700;
            background: linear-gradient(135deg, #fff9e6 0%, #fff 100%);
        }
        
        .bot-card.featured::before {
            content: "‚≠ê FEATURED";
            position: absolute;
            top: 15px;
            right: -30px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 5px 35px;
            font-size: 0.7rem;
            font-weight: bold;
            transform: rotate(45deg);
            box-shadow: 0 2px 10px rgba(255, 215, 0, 0.5);
        }
        
        .bot-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .bot-avatar-placeholder {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            border: 3px solid #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .bot-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        
        .bot-description {
            color: #6c757d;
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .bot-stats {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .bot-stat {
            background: rgba(103, 126, 234, 0.1);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #667eea;
            font-weight: 500;
        }
        
        .rating-stars {
            color: #ffc107;
        }
        
        .category-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .status-badge.running { background: #28a745; }
        .status-badge.stopped { background: #dc3545; }
        .status-badge { 
            padding: 0.2rem 0.6rem; 
            border-radius: 10px; 
            color: white; 
            font-size: 0.7rem; 
            text-transform: uppercase;
        }
        
        .bot-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .tag {
            background: rgba(108, 117, 125, 0.1);
            color: #6c757d;
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-size: 0.75rem;
        }
        
        .btn-start-chat {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            color: white;
            padding: 0.7rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .btn-start-chat:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
            color: white;
        }
        
        .admin-panel-link {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
            padding: 1rem;
            border-radius: 50%;
            text-decoration: none;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .admin-panel-link:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: white;
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .bot-card {
                padding: 1rem;
            }
            
            .bot-stats {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .filters-container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
<div class="container py-4">
    <!-- Hero Section -->
    <div class="hero-section text-center">
        <h1 class="hero-title">ü§ñ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –±–æ—Ç–æ–≤</h1>
        <p class="hero-subtitle">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏—Ö Telegram –±–æ—Ç–æ–≤ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–¥–∞—á</p>
        
        <!-- Search Bar -->
        <div class="search-bar d-flex align-items-center">
            <i class="fas fa-search text-muted ms-3"></i>
            <input type="text" id="searchInput" class="form-control-plaintext flex-grow-1" placeholder="–ü–æ–∏—Å–∫ –±–æ—Ç–æ–≤..." autocomplete="off">
            <button class="btn btn-primary me-2" onclick="searchBots()">
                <i class="fas fa-search"></i>
            </button>
        </div>
        
        <div class="d-flex justify-content-center gap-2 flex-wrap">
            <span class="badge bg-light text-dark">{{ marketplace_bots|length }} –±–æ—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ</span>
            <span class="badge bg-success">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ</span>
            <span class="badge bg-warning text-dark">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ</span>
        </div>
    </div>

    <!-- Filters -->
    <div class="filters-container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="d-flex flex-wrap gap-2 align-items-center">
                    <label class="text-white fw-bold me-2">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                    <button class="btn btn-sm btn-outline-light category-filter active" data-category="all">
                        üì¶ –í—Å–µ
                    </button>
                    <button class="btn btn-sm btn-outline-light category-filter" data-category="assistant">
                        ü§ñ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã
                    </button>
                    <button class="btn btn-sm btn-outline-light category-filter" data-category="business">
                        üíº –ë–∏–∑–Ω–µ—Å
                    </button>
                    <button class="btn btn-sm btn-outline-light category-filter" data-category="entertainment">
                        üéÆ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
                    </button>
                    <button class="btn btn-sm btn-outline-light category-filter" data-category="productivity">
                        ‚ö° –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                    </button>
                </div>
            </div>
            <div class="col-lg-4 text-end">
                <div class="d-flex gap-2 justify-content-end align-items-center flex-wrap">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="featuredOnly">
                        <label class="form-check-label text-white" for="featuredOnly">
                            ‚≠ê –¢–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ
                        </label>
                    </div>
                    <select class="form-select form-select-sm" id="sortBy" style="width: auto;">
                        <option value="rating">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É</option>
                        <option value="users">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
                        <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Bots Grid -->
    <div id="botsContainer">
        {% if marketplace_bots %}
            <div class="row" id="botsGrid">
                {% for bot in marketplace_bots %}
                <div class="col-lg-6 col-xl-4 bot-item" 
                     data-category="{{ bot.category }}" 
                     data-featured="{{ bot.featured|lower }}"
                     data-rating="{{ bot.rating }}"
                     data-users="{{ bot.total_users }}"
                     data-name="{{ bot.title|lower }}">
                    <div class="bot-card {% if bot.featured %}featured{% endif %}">
                        <div class="d-flex align-items-start mb-3">
                            <div class="me-3">
                                {% if bot.image_url %}
                                    <img src="{{ bot.image_url }}" alt="{{ bot.title }}" class="bot-avatar" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                    <div class="bot-avatar-placeholder" style="display: none;">
                                        ü§ñ
                                    </div>
                                {% else %}
                                    <div class="bot-avatar-placeholder">
                                        ü§ñ
                                    </div>
                                {% endif %}
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <h3 class="bot-title">{{ bot.title }}</h3>
                                    <span class="status-badge {{ bot.status }}">
                                        {{ bot.status }}
                                    </span>
                                </div>
                                <div class="d-flex gap-2 mb-2">
                                    <span class="category-badge">{{ bot.category }}</span>
                                    {% if bot.rating > 0 %}
                                        <span class="bot-stat">
                                            <span class="rating-stars">
                                                {% for i in range((bot.rating)|round|int) %}‚≠ê{% endfor %}
                                            </span>
                                            {{ "%.1f"|format(bot.rating) }}
                                        </span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <p class="bot-description">{{ bot.description or '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ' }}</p>
                        
                        {% if bot.tags %}
                        <div class="bot-tags">
                            {% for tag in bot.tags[:5] %}
                                <span class="tag">#{{ tag }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                        
                        <div class="bot-stats">
                            {% if bot.total_users > 0 %}
                                <span class="bot-stat">
                                    <i class="fas fa-users"></i> {{ bot.total_users }} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                                </span>
                            {% endif %}
                            {% if bot.last_updated %}
                                <span class="bot-stat">
                                    <i class="fas fa-clock"></i> –û–±–Ω–æ–≤–ª–µ–Ω {{ bot.last_updated }}
                                </span>
                            {% endif %}
                        </div>
                        
                        <div class="d-flex gap-2 align-items-center">
                            {% if bot.username %}
                                <a href="https://t.me/{{ bot.username }}" 
                                   class="btn-start-chat" 
                                   target="_blank"
                                   onclick="trackBotClick({{ bot.id }})">
                                    <i class="fab fa-telegram"></i> –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram
                                </a>
                            {% endif %}
                            <a href="/marketplace/{{ bot.id }}" 
                               class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-info-circle"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </a>
                            {% if bot.website %}
                                <a href="{{ bot.website }}" 
                                   class="btn btn-outline-secondary btn-sm" 
                                   target="_blank">
                                    <i class="fas fa-external-link-alt"></i>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <i class="fas fa-robot"></i>
                <h3>–ü–æ–∫–∞ –Ω–µ—Ç –±–æ—Ç–æ–≤ –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ</h3>
                <p>–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞!</p>
                <a href="/" class="btn btn-light btn-lg mt-3">
                    <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞
                </a>
            </div>
        {% endif %}
    </div>

    <!-- Load More Button -->
    <div class="text-center mt-4" id="loadMoreContainer" style="display: none;">
        <button class="btn btn-outline-light btn-lg" onclick="loadMoreBots()">
            <i class="fas fa-chevron-down"></i> –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ
        </button>
    </div>
</div>

<!-- Admin Panel Link -->
<a href="/" class="admin-panel-link" title="–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è">
    <i class="fas fa-cog"></i>
</a>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
$(document).ready(function() {
    // Category filter functionality
    $('.category-filter').click(function() {
        $('.category-filter').removeClass('active');
        $(this).addClass('active');
        
        const category = $(this).data('category');
        filterBots();
    });
    
    // Featured filter
    $('#featuredOnly').change(function() {
        filterBots();
    });
    
    // Sort functionality
    $('#sortBy').change(function() {
        sortBots();
    });
    
    // Search functionality
    $('#searchInput').on('keyup', function(e) {
        if (e.key === 'Enter') {
            searchBots();
        }
        // Real-time search on typing (with debounce)
        clearTimeout(window.searchTimeout);
        window.searchTimeout = setTimeout(filterBots, 300);
    });
});

function filterBots() {
    const searchTerm = $('#searchInput').val().toLowerCase();
    const selectedCategory = $('.category-filter.active').data('category');
    const featuredOnly = $('#featuredOnly').is(':checked');
    
    $('.bot-item').each(function() {
        const $item = $(this);
        const category = $item.data('category');
        const featured = $item.data('featured');
        const title = $item.data('name');
        const description = $item.find('.bot-description').text().toLowerCase();
        
        let show = true;
        
        // Category filter
        if (selectedCategory !== 'all' && category !== selectedCategory) {
            show = false;
        }
        
        // Featured filter
        if (featuredOnly && !featured) {
            show = false;
        }
        
        // Search filter
        if (searchTerm && !title.includes(searchTerm) && !description.includes(searchTerm)) {
            show = false;
        }
        
        $item.toggle(show);
    });
    
    // Show empty state if no bots visible
    const visibleBots = $('.bot-item:visible').length;
    if (visibleBots === 0) {
        showEmptyState();
    } else {
        hideEmptyState();
    }
}

function sortBots() {
    const sortBy = $('#sortBy').val();
    const $container = $('#botsGrid');
    const $items = $('.bot-item').detach();
    
    $items.sort(function(a, b) {
        let aVal, bVal;
        
        switch(sortBy) {
            case 'rating':
                aVal = parseFloat($(a).data('rating')) || 0;
                bVal = parseFloat($(b).data('rating')) || 0;
                return bVal - aVal; // Descending
                
            case 'users':
                aVal = parseInt($(a).data('users')) || 0;
                bVal = parseInt($(b).data('users')) || 0;
                return bVal - aVal; // Descending
                
            case 'name':
                aVal = $(a).data('name');
                bVal = $(b).data('name');
                return aVal.localeCompare(bVal); // Ascending
                
            default:
                return 0;
        }
    });
    
    $container.append($items);
}

function searchBots() {
    filterBots();
}

function showEmptyState() {
    if ($('#emptySearchState').length === 0) {
        $('#botsContainer').append(`
            <div id="emptySearchState" class="empty-state">
                <i class="fas fa-search"></i>
                <h3>–ë–æ—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞</p>
                <button class="btn btn-outline-light" onclick="clearFilters()">
                    <i class="fas fa-times"></i> –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                </button>
            </div>
        `);
    }
    $('#botsGrid').hide();
}

function hideEmptyState() {
    $('#emptySearchState').remove();
    $('#botsGrid').show();
}

function clearFilters() {
    $('#searchInput').val('');
    $('#featuredOnly').prop('checked', false);
    $('.category-filter').removeClass('active').first().addClass('active');
    $('#sortBy').val('rating');
    filterBots();
    sortBots();
}

function trackBotClick(botId) {
    // Track bot clicks for analytics
    console.log(`Bot ${botId} clicked`);
    // Here you could send analytics data to your server
}

function loadMoreBots() {
    // Placeholder for pagination functionality
    console.log('Load more bots...');
}

// Smooth scroll animations for mobile
if (window.innerWidth <= 768) {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Add some entrance animations
$(window).on('load', function() {
    $('.bot-card').each(function(index) {
        $(this).css({
            'opacity': '0',
            'transform': 'translateY(30px)'
        }).delay(index * 100).animate({
            'opacity': '1'
        }, 500).css('transform', 'translateY(0px)');
    });
});
</script>
</body>
</html>
