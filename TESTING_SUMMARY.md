# üß™ –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–Ø - –ò–¢–û–ì–ò

## üîß **–ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û**

### ‚úÖ **1. –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–æ–≤ (15% –∑–∞–≤–∏—Å–∞–Ω–∏–µ)**

**–ü–†–û–ë–õ–ï–ú–ê:** –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–ª–æ –Ω–∞ —ç—Ç–∞–ø–µ "Stopping all bots..." (15%)

**–†–ï–®–ï–ù–ò–ï:**
- ‚úÖ **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `stop_all_bots_for_update()`** –≤ `src/bot_manager.py`
- ‚úÖ **–†–µ–∞–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** –ø–æ—Ç–æ–∫–æ–≤ —Å `thread.join(timeout)`
- ‚úÖ **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** –∑–∞–≤–∏—Å—à–∏—Ö –±–æ—Ç–æ–≤
- ‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö** - –ù–ï–¢ deadlock'–æ–≤
- ‚úÖ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ (–¥–æ 5 —Å–µ–∫)
- ‚úÖ **–û–±—â–∏–π —Ç–∞–π–º–∞—É—Ç** –¥–ª—è –≤—Å–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ (20-30 —Å–µ–∫)

### ‚úÖ **2. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã**

- ‚úÖ **Git –∫–æ–º–∞–Ω–¥—ã:** —Å–æ–∫—Ä–∞—â–µ–Ω—ã —Å 30 –¥–æ 15 —Å–µ–∫—É–Ω–¥
- ‚úÖ **Restart –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:** fire-and-forget —Ä–µ–∂–∏–º
- ‚úÖ **Bot stopping:** –º–∞–∫—Å–∏–º—É–º 20 —Å–µ–∫—É–Ω–¥

### ‚úÖ **3. –£–ª—É—á—à–µ–Ω–Ω—ã–π restart –º–µ—Ö–∞–Ω–∏–∑–º**

- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è venv** –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏  
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è** –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –ª–æ–≥–∞–º**
- ‚úÖ **Fire-and-forget –∑–∞–ø—É—Å–∫** –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è

## üìÅ **–°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´ –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

1. **`full_test_suite.py`** - –ø–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç
2. **`simple_test.py`** - –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ø–æ —à–∞–≥–∞–º
3. **`check_status.py`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
4. **`test_manual.py`** - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
5. **`start_test.py`** - –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
6. **`src/test_bot_stopping.py`** - —Ç–µ—Å—Ç –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–æ–≤

## üéØ **–ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pkill -f "python.*app.py"

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd src && python3 app.py &

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–æ–∂–∏–¥–∞–µ—Ç—Å—è HTTP 401)
curl -s -o /dev/null -w "%{http_code}" http://localhost:60183/
```

### **–≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞**
```bash
cd ..
echo "# Test auto-update $(date)" >> README.md
git add README.md
git commit -m "test: auto-update trigger"
```

### **–≠—Ç–∞–ø 3: –¢–µ—Å—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

**–í–∞—Ä–∏–∞–Ω—Ç A - –ß–µ—Ä–µ–∑ API:**
```bash
curl -u admin:securepassword123 -X POST http://localhost:60183/api/update
```

**–í–∞—Ä–∏–∞–Ω—Ç B - –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
- –û—Ç–∫—Ä—ã—Ç—å: http://localhost:60183/
- –õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: securepassword123  
- –ù–∞–∂–∞—Ç—å "Update Application"

### **–≠—Ç–∞–ø 4: –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏**

‚úÖ **15% - "Professional bot stopping":**
- –î–û–õ–ñ–ù–û: –ø—Ä–æ–π—Ç–∏ –∑–∞ 5-20 —Å–µ–∫—É–Ω–¥
- –ù–ï –î–û–õ–ñ–ù–û: –∑–∞–≤–∏—Å–∞—Ç—å –±–æ–ª–µ–µ 30 —Å–µ–∫—É–Ω–¥

‚úÖ **25% - "Creating backup":**
- –î–û–õ–ñ–ù–û: –±—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞

‚úÖ **50% - "Downloading updates":**
- –î–û–õ–ñ–ù–û: git pull –∑–∞ 10-15 —Å–µ–∫—É–Ω–¥

‚úÖ **70% - "Validating update":**
- –î–û–õ–ñ–ù–û: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤

‚úÖ **90% - "Restarting application":**
- –î–û–õ–ñ–ù–û: fire-and-forget restart

‚úÖ **100% - "Update completed":**
- –î–û–õ–ñ–ù–û: JSON –æ—Ç–≤–µ—Ç —Å success: true

### **–≠—Ç–∞–ø 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP –æ—Ç–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 401)
curl -s -o /dev/null -w "%{http_code}" http://localhost:60183/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
ps aux | grep "python.*app.py"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ API
curl -u admin:securepassword123 http://localhost:60183/api/update/status
```

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú**

### **–ï—Å–ª–∏ –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ 15%:**
```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f src/logs/auto_update.log | grep -E "(bot|stop|15%)"

# –¢–µ—Å—Ç –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
python src/test_bot_stopping.py
```

### **–ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ restart
tail -f src/logs/app_restart.log

# –†—É—á–Ω–æ–π —Ç–µ—Å—Ç restart —Å–∫—Ä–∏–ø—Ç–∞
./src/restart_app.sh
```

### **–ï—Å–ª–∏ git –∫–æ–º–∞–Ω–¥—ã –∑–∞–≤–∏—Å–∞—é—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å git —Å—Ç–∞—Ç—É—Å
git status
git fetch origin --timeout=15
```

## üìä **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### ‚úÖ **–£–°–ü–ï–•:**
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∑–∞ 30-90 —Å–µ–∫—É–Ω–¥
- –ù–ï–¢ –∑–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ 15%
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- HTTP 401 –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- JSON –æ—Ç–≤–µ—Ç: `{"success": true, "message": "Update completed successfully"}`

### ‚ùå **–ü–†–û–ë–õ–ï–ú–´:**
- –ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ "Stopping all bots..." –±–æ–ª–µ–µ 30 —Å–µ–∫
- HTTP 000 –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ app.py –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö auto_update.log

## üéØ **–ò–¢–û–ì**

**–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–ù–ï–î–†–ï–ù–´:**
- ‚úÖ Deadlock'–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–æ–≤ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ Restart –º–µ—Ö–∞–Ω–∏–∑–º —É–ª—É—á—à–µ–Ω
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

**–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ!**

–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ.

---

## üìù **–ë–´–°–¢–†–´–ô –¢–ï–°–¢:**

```bash
# 1. –û—á–∏—Å—Ç–∫–∞ –∏ –∑–∞–ø—É—Å–∫
pkill -f "python.*app.py" && cd src && python3 app.py &

# 2. –û–∂–∏–¥–∞–Ω–∏–µ (10 —Å–µ–∫) –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞
sleep 10 && curl -s -o /dev/null -w "%{http_code}" http://localhost:60183/

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
cd .. && echo "# Test $(date)" >> README.md && git add README.md && git commit -m "test"

# 4. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
curl -u admin:securepassword123 -X POST http://localhost:60183/api/update

# 5. –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: {"success": true, ...} –∑–∞ 30-90 —Å–µ–∫
```

